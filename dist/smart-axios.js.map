{"version":3,"file":"smart-axios.js.map","sources":["../node_modules/strict-uri-encode/index.js","../node_modules/object-assign/index.js","../node_modules/query-string/index.js","../lib/restful-resolver.js","../lib/utils.js","../lib/options-merger.js","../src/index.js"],"sourcesContent":["'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\nvar decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nexports.extract = function (str) {\n\tvar queryStart = str.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\treturn str.slice(queryStart + 1);\n};\n\nexports.parse = function (str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^[?#&]/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeComponent(val);\n\n\t\tformatter(decodeComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n};\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n","const _resolveRestfulApi = function (api) {\n  let url\n  url = api.url\n  if (!url || typeof url !== 'string') {\n    throw new Error(`url ${url} is invalid!`)\n  }\n  const params = api.params\n  Object.keys(params).forEach((key) => {\n    url = url.replace(new RegExp(`/:${key}`, 'ig'), `/${params[key]}`)\n  })\n  return url\n}\n\nexport default _resolveRestfulApi","const _isFunc = function (o) {\n  return o && typeof o === 'function'\n}\n\nconst _isArray = function (o) {\n  return o && Object.prototype.toString.call(o) === '[object Array]'\n}\n\nconst _isObject = function (o) {\n  return o && Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport { _isFunc as isFunc }\nexport { _isArray as isArray }\nexport { _isObject as isObject }\n\nexport default {\n  isFunc: _isFunc,\n  isArray: _isArray,\n  isObject: _isObject\n}","import { isArray, isObject } from './utils'\n\nconst _mergeDeep = function (target, source) {\n  Object.keys(source).forEach(key => {\n    const value = source[key]\n    if (isArray(value)) {\n      if (!target[key]) {\n        target[key] = []\n      }\n      target[key].concat(value)\n    } else if (isObject(value)) {\n      if (!target[key]) {\n        target[key] = {}\n      }\n      _mergeDeep(target[key], value)\n    } else {\n      target[key] = value\n    }\n  })\n  return target\n}\nconst _mergeOptions = function (target, source) {\n  let res = {}\n  if (!source || !Object.keys(source).length) {\n    res = target || {}\n  } else {\n    res = _mergeDeep(target || {}, source)\n  }\n  return res\n}\n\nexport default _mergeOptions","import axios from 'axios'\nimport { stringify } from 'query-string'\n\nimport resolveRestfulApi from '../lib/restful-resolver'\nimport { isFunc, isObject } from '../lib/utils'\nimport merge from '../lib/options-merger'\n\nconst _resOk = function (response, resolveFunc, callbackFunc, thisArg) {\n  if (isFunc(callbackFunc)) {\n    callbackFunc.call(thisArg, undefined, response)\n  }\n  if (isFunc(resolveFunc)) {\n    resolveFunc(response)\n  }\n}\n\nconst _resError = function (error, rejectFunc, callbackFunc, thisArg) {\n  if (isFunc(callbackFunc)) {\n    callbackFunc.call(thisArg, error)\n  }\n  if (isFunc(rejectFunc)) {\n    rejectFunc(error)\n  }\n}\n\nconst _resolveQueryMethod= function (methodName, context) {\n  return function (api, queries, callback, thisArg) {\n    if (isFunc(queries)) {\n      thisArg = callback\n      callback = queries\n      queries = undefined\n    }\n    thisArg = thisArg || context\n    return new Promise(function (resolve, reject) {\n      var _q = []\n      if (queries) {\n        _q = Object.keys(queries).map(key => `${key}=${queries[key]}`)\n      }\n      var url = _q.length > 0 ? `${api}?${_q.join('&')}` : api\n      context[methodName].call(context, url).then((response) => {\n        _resOk(response, resolve, callback, thisArg)\n      }).catch((error) => {\n        _resError(error, reject, callback, thisArg)\n      })\n    })\n  }\n}\n\nconst _resolveDataMethod = function (methodName, context) {\n  return function (api, data, callback, thisArg) {\n    if (isFunc(data)) {\n      thisArg = callback\n      callback = data\n      data = undefined\n    }\n    thisArg = thisArg || context\n    return new Promise((resolve, reject) => {\n      context[methodName].call(context, api, data ? stringify(data) : undefined)\n      .then((response) => {\n        _resOk(response, resolve, callback, thisArg)\n      }).catch((error) => {\n        _resError(error, reject, callback, thisArg)\n      })\n    })\n  }\n}\n\nconst SmartAxios = function(options) {\n  options = options || {}\n  this._opt = merge({}, options)\n  const _raw = this.raw = axios.create(this._opt)\n\n  for (let key in _raw) {\n    if (isFunc(_raw[key])) {\n      (function (ctx, k, ax) {\n        ctx[k] = function () {\n          return ax[k].apply(ax, Array.prototype.slice.call(arguments))\n        }\n      })(this, key, _raw)\n    }\n  }\n\n  if (this._opt.urls) {\n    const POST_METHOD_RE = /^(add|create|new|post)\\w+$/\n    const DELETE_METHOD_RE = /^(delete|remove)\\w+$/\n    const PUT_METHOD_RE = /^(edit|update|modify|put)\\w+$/\n    const GET_METHOD_RE = /^(get|load|fetch|query)\\w+$/\n    const PATCH_METHOD_RE = /^(patch)\\w+$/    \n    const OPTIONS_METHOD_RE = /^(options)\\w+$/\n    const HEAD_METHOD_RE = /^(head)\\w+$/\n    const urlConfigs = this._opt.urls\n    const that = this\n\n    Object.keys(urlConfigs).forEach(apiName => {\n      const urlConf = urlConfigs[apiName]\n      let path = undefined\n      let method = undefined\n      if (typeof urlConf === 'string') {\n        path = urlConf\n        method = undefined\n      } else if (isObject(urlConf)) {\n        path = urlConf['path']\n        method = urlConf['method']\n        if (method) {\n          method = method.toLowerCase()\n        }\n      }\n\n      if (!path) {\n        console.error(`${apiName}()的接口地址无效`)\n        console.log()\n        return\n      }\n\n      if (!method) {\n        if (POST_METHOD_RE.test(apiName)) {\n          method = _resolveDataMethod('post', that)\n        } else if (DELETE_METHOD_RE.test(apiName)) {\n          method = _resolveQueryMethod('delete', that)\n        } else if (PUT_METHOD_RE.test(apiName)) {\n          method = _resolveDataMethod('put', that)\n        } else if (GET_METHOD_RE.test(apiName)) {\n          method = _resolveQueryMethod('get', that)\n        } else if (PATCH_METHOD_RE.test(apiName)) {\n          method = _resolveDataMethod('patch', that)\n        } else if (OPTIONS_METHOD_RE.test(apiName)) {\n          method = _resolveQueryMethod('options', that)\n        } else if (HEAD_METHOD_RE.test(apiName)) {\n          method = _resolveQueryMethod('head', that)\n        } else {\n\n          console.error(`方法名: ${apiName} 不符合命名规则`)\n          console.log()\n          console.info('Tips:')\n          console.info('GET\\t=> get|load|fetch|query')\n          console.info('POST\\t=> add|create|new|post')\n          console.info('PUT\\t=> edit|update|modify|put')\n          console.info('DELETE\\t=> delete|remove')\n          console.info('PATCH\\t=> patch')\n          console.info('OPTIONS\\t=> options')\n          console.info('HEAD\\t=> head')\n          console.log()\n\n          return\n        }\n      } else {\n        if (/(post|put|patch)/.test(method)) {\n          method = _resolveDataMethod(method, that)\n        } else if (/(delete|get|options|head)/.test(method)) {\n          method = _resolveQueryMethod(method, that)\n        } else {\n\n          console.error(`未知的请求方法: ${method}, ${apiName}()无法正常生产方法`)\n          console.log()\n\n          return\n        }\n      }\n\n      that[apiName] = function () {\n        let args = Array.prototype.slice.call(arguments)\n        let _url = path\n        if (args.length > 0 && path.indexOf('/:') >= 0) {\n          if (isObject(args[0])) {\n            const params = args[0]\n            args = args.filter((item, index) => index > 0)\n            _url = resolveRestfulApi({ url: path, params })\n          }\n        }\n        return method.apply(that, [ _url ].concat(args))\n      }\n    })\n  }\n}\n\nSmartAxios.prototype.branch = function (options) {\n  return new SmartAxios(merge(merge({}, this._opt), options))\n}\n\nmodule.exports = function (options) {\n  return new SmartAxios(options)\n}"],"names":["_resolveRestfulApi","api","url","Error","params","keys","forEach","key","replace","RegExp","_isFunc","o","_isArray","Object","prototype","toString","call","_isObject","_mergeDeep","target","source","value","isArray","concat","isObject","_mergeOptions","res","length","_resOk","response","resolveFunc","callbackFunc","thisArg","isFunc","undefined","_resError","error","rejectFunc","_resolveQueryMethod","methodName","context","queries","callback","Promise","resolve","reject","_q","map","join","then","catch","_resolveDataMethod","data","stringify","SmartAxios","options","_opt","merge","_raw","raw","axios","create","ctx","k","ax","apply","Array","slice","arguments","urls","POST_METHOD_RE","DELETE_METHOD_RE","PUT_METHOD_RE","GET_METHOD_RE","PATCH_METHOD_RE","OPTIONS_METHOD_RE","HEAD_METHOD_RE","urlConfigs","that","urlConf","apiName","path","method","toLowerCase","log","test","info","args","_url","indexOf","filter","item","index","resolveRestfulApi","branch","module","exports"],"mappings":"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"}